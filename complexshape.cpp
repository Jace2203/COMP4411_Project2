#include "complexshape.h"

#include "vec.h"
#include "modelerdraw.h"

void drawTurret()
{
    const int faceNum = 72;

    Vec3f vertex_buffer[38] = {
        Vec3f(-1.0f, 0.0f, 1.0f),
        Vec3f(1.0f, 0.0f, 1.0f),
        Vec3f(-1.0f, 0.0f, -1.0f),
        Vec3f(1.0f, 0.0f, -1.0f),
        Vec3f(-0.688362f, 0.0f, -1.688679f),
        Vec3f(0.688362f, 0.0f, -1.688679f),
        Vec3f(-1.0f, 0.625584f, 1.0f),
        Vec3f(1.0f, 0.625584f, 1.0f),
        Vec3f(-1.0f, 0.625584f, -1.0f),
        Vec3f(1.0f, 0.625584f, -1.0f),
        Vec3f(-0.688362f, 0.625584f, -1.688679f),
        Vec3f(0.688362f, 0.625584f, -1.688679f),
        Vec3f(-0.717988f, 0.855604f, 0.760938f),
        Vec3f(0.717988f, 0.855604f, 0.760938f),
        Vec3f(-0.717988f, 0.855604f, -0.586813f),
        Vec3f(0.717988f, 0.855604f, -0.586813f),
        Vec3f(-0.494236f, 0.855604f, -1.0f),
        Vec3f(0.494236f, 0.855604f, -1.0f),
        Vec3f(-0.413017f, 0.0f, -1.688679f),
        Vec3f(-0.137672f, 0.0f, -1.688679f),
        Vec3f(0.137672f, 0.0f, -1.688679f),
        Vec3f(0.413017f, 0.0f, -1.68868f),
        Vec3f(-0.413017f, 0.625584f, -1.688679f),
        Vec3f(-0.137672f, 0.625584f, -1.688679f),
        Vec3f(0.137672f, 0.625584f, -1.688679f),
        Vec3f(0.413017f, 0.625584f, -1.688679f),
        Vec3f(0.413017f, 0.855604f, -1.0f),
        Vec3f(0.137672f, 0.855604f, -1.0f),
        Vec3f(-0.137672f, 0.855604f, -1.0f),
        Vec3f(-0.413017f, 0.855604f, -1.0f),
        Vec3f(-0.413017f, 0.0f, -1.0f),
        Vec3f(-0.137672f, 0.0f, -1.0f),
        Vec3f(0.137672f, 0.0f, -1.0f),
        Vec3f(0.413017f, 0.0f, -1.0f),
        Vec3f(0.413017f, 0.625584f, -1.0f),
        Vec3f(-0.413017f, 0.625584f, -1.0f),
        Vec3f(0.137672f, 0.625584f, -1.0f),
        Vec3f(-0.137672f, 0.625584f, -1.0f),
    };

    int index_buffer[faceNum * 3] = {
        0, 3, 1,
        2, 0, 6,
        1, 3, 7,
        0, 1, 6,
        2, 10, 4,
        9, 5, 11,
        6, 1, 7,
        8, 10, 2,
        7, 3, 9,
        6, 8, 2,
        3, 5, 9,
        12, 14, 8,
        6, 12, 8,
        13, 12, 6,
        7, 13, 6,
        9, 13, 7,
        13, 9, 15,
        14, 12, 13,
        13, 15, 14,
        17, 26, 14,
        17, 14, 15,
        16, 8, 14,
        8, 16, 10,
        11, 17, 9,
        17, 15, 9,
        5, 3, 21,
        4, 18, 2,
        3, 0, 33,
        24, 28, 27,
        24, 23, 28,
        22, 16, 29,
        16, 22, 10,
        26, 17, 25,
        17, 11, 25,
        25, 11, 21,
        5, 21, 11,
        18, 10, 22,
        10, 18, 4,
        24, 20, 19,
        24, 19, 23,
        18, 30, 2,
        3, 33, 21,
        31, 19, 20,
        31, 20, 32,
        25, 34, 26,
        24, 27, 36,
        28, 23, 37,
        22, 29, 35,
        29, 28, 35,
        37, 35, 28,
        27, 26, 36,
        34, 36, 26,
        33, 36, 34,
        36, 33, 32,
        31, 35, 37,
        35, 31, 30,
        37, 23, 31,
        23, 19, 31,
        36, 32, 24,
        32, 20, 24,
        34, 25, 33,
        25, 21, 33,
        35, 30, 22,
        30, 18, 22,
        33, 0, 32,
        32, 0, 31,
        31, 0, 30,
        0, 2, 30,
        16, 14, 29,
        29, 14, 28,
        28, 14, 27,
        26, 27, 14,
    };

    for (int i = 0; i < faceNum; i++)
    {
        Vec3f a = vertex_buffer[index_buffer[i * 3 + 0]];
        Vec3f b = vertex_buffer[index_buffer[i * 3 + 1]];
        Vec3f c = vertex_buffer[index_buffer[i * 3 + 2]];
        drawTriangle(a[0], a[1], a[2], b[0], b[1], b[2], c[0], c[1], c[2]);
    }
}

void drawShip()
{
    const int faceNum = 98;

    Vec3f vertex_buffer[52] = {
        Vec3f(0.373871f, 1.0f, 0.0f),
        Vec3f(1.0f, 0.0f, 0.0f),
        Vec3f(0.373871f, 1.0f, -1.0f),
        Vec3f(1.0f, 0.0f, -1.0f),
        Vec3f(1.626129f, 1.0f, 0.0f),
        Vec3f(1.626129f, 1.0f, -1.0f),
        Vec3f(0.373871f, 1.0f, -2.0f),
        Vec3f(1.0f, 0.0f, -2.0f),
        Vec3f(1.626129f, 1.0f, -2.0f),
        Vec3f(0.475504f, 1.0f, -3.0f),
        Vec3f(1.0f, 0.086105f, -3.0f),
        Vec3f(1.524496f, 1.0f, -3.0f),
        Vec3f(0.565324f, 0.5f, -1.0f),
        Vec3f(1.0f, 1.0f, -4.236718f),
        Vec3f(0.565324f, 0.5f, 0.0f),
        Vec3f(1.263222f, 1.0f, -3.77803f),
        Vec3f(1.0f, 0.48374f, -3.778027f),
        Vec3f(0.736778f, 1.0f, -3.778027f),
        Vec3f(0.573323f, 0.5f, -2.0f),
        Vec3f(0.650735f, 0.549442f, -3.0f),
        Vec3f(0.834145f, 0.781629f, -3.778027f),
        Vec3f(1.434676f, 0.5f, 0.0f),
        Vec3f(1.434676f, 0.5f, -1.0f),
        Vec3f(1.426677f, 0.5f, -2.0f),
        Vec3f(1.349265f, 0.549442f, -3.0f),
        Vec3f(1.165855f, 0.781629f, -3.778027f),
        Vec3f(0.750751f, 0.25f, 0.0f),
        Vec3f(0.750751f, 0.25f, -1.0f),
        Vec3f(0.750751f, 0.25f, -2.0f),
        Vec3f(0.797162f, 0.325193f, -3.0f),
        Vec3f(0.89231f, 0.640959f, -3.778027f),
        Vec3f(1.249249f, 0.25f, -1.0f),
        Vec3f(1.249249f, 0.25f, -2.0f),
        Vec3f(1.202838f, 0.325193f, -3.0f),
        Vec3f(1.10769f, 0.640959f, -3.778027f),
        Vec3f(1.249249f, 0.25f, 0.0f),
        Vec3f(1.0f, 0.252686f, -3.432651f),
        Vec3f(0.596365f, 1.0f, -3.432651f),
        Vec3f(1.403635f, 1.0f, -3.43265f),
        Vec3f(0.739839f, 0.650121f, -3.432651f),
        Vec3f(1.260161f, 0.650121f, -3.432651f),
        Vec3f(0.829652f, 0.475182f, -3.432651f),
        Vec3f(1.170348f, 0.475182f, -3.432651f),
        Vec3f(1.0f, 1.0f, 0.0f),
        Vec3f(1.0f, 0.25f, 0.0f),
        Vec3f(1.0f, 0.5f, 0.0f),
        Vec3f(0.750751f, 0.25f, 0.0f),
        Vec3f(1.0f, 1.0f, -3.77803f),
        Vec3f(1.0f, 1.0f, -3.43265f),
        Vec3f(1.0f, 1.0f, -3.0f),
        Vec3f(1.0f, 1.0f, -2.0f),
        Vec3f(1.0f, 1.0f, -1.0f),
    };

    int index_buffer[faceNum * 3] = {
        22, 23, 5,
        22, 5, 21,
        4, 21, 5,
        8, 5, 23,
        11, 8, 23,
        24, 11, 23,
        24, 40, 11,
        38, 11, 40,
        15, 38, 40,
        25, 15, 40,
        13, 15, 25,
        25, 34, 13,
        16, 13, 34,
        16, 30, 13,
        30, 20, 13,
        17, 13, 20,
        20, 39, 17,
        37, 17, 39,
        37, 39, 9,
        9, 39, 19,
        19, 18, 9,
        18, 6, 9,
        6, 18, 2,
        2, 18, 12,
        12, 14, 2,
        0, 2, 14,
        26, 14, 27,
        27, 14, 12,
        12, 18, 27,
        28, 27, 18,
        18, 29, 28,
        29, 18, 19,
        19, 39, 29,
        41, 29, 39,
        30, 41, 39,
        20, 30, 39,
        25, 40, 34,
        42, 34, 40,
        42, 40, 33,
        33, 40, 24,
        24, 23, 33,
        32, 33, 23,
        32, 23, 31,
        23, 22, 31,
        22, 21, 31,
        21, 35, 31,
        35, 1, 31,
        3, 31, 1,
        3, 7, 31,
        32, 31, 7,
        7, 33, 32,
        33, 7, 10,
        10, 36, 33,
        42, 33, 36,
        34, 42, 36,
        16, 34, 36,
        30, 16, 36,
        41, 30, 36,
        41, 36, 29,
        36, 10, 29,
        7, 29, 10,
        28, 29, 7,
        28, 7, 27,
        3, 27, 7,
        3, 1, 27,
        1, 26, 27,
        14, 43, 0,
        43, 21, 4,
        43, 14, 45,
        43, 45, 21,
        45, 44, 21,
        21, 44, 35,
        35, 44, 1,
        1, 44, 46,
        14, 46, 44,
        44, 45, 14,
        4, 5, 43,
        43, 5, 51,
        2, 43, 51,
        0, 43, 2,
        51, 50, 2,
        51, 5, 50,
        5, 8, 50,
        11, 50, 8,
        50, 11, 49,
        49, 11, 48,
        11, 38, 48,
        15, 48, 38,
        48, 15, 47,
        15, 13, 47,
        13, 17, 47,
        47, 17, 48,
        17, 37, 48,
        9, 48, 37,
        48, 9, 49,
        50, 49, 9,
        9, 6, 50,
        2, 50, 6,
    };

    for (int i = 0; i < faceNum; i++)
    {
        Vec3f a = vertex_buffer[index_buffer[i * 3 + 0]];
        Vec3f b = vertex_buffer[index_buffer[i * 3 + 1]];
        Vec3f c = vertex_buffer[index_buffer[i * 3 + 2]];
        drawTriangle(a[0], a[1], a[2], b[0], b[1], b[2], c[0], c[1], c[2]);
    }
}