#include "complexshape.h"

#include "vec.h"
#include "modelerdraw.h"

void drawTurret()
{
    const int faceNum = 72;

    Vec3f vertex_buffer[38] = {
        Vec3f(-1.0f, 0.0f, 1.0f),
        Vec3f(1.0f, 0.0f, 1.0f),
        Vec3f(-1.0f, 0.0f, -1.0f),
        Vec3f(1.0f, 0.0f, -1.0f),
        Vec3f(-0.688362f, 0.0f, -1.688679f),
        Vec3f(0.688362f, 0.0f, -1.688679f),
        Vec3f(-1.0f, 0.625584f, 1.0f),
        Vec3f(1.0f, 0.625584f, 1.0f),
        Vec3f(-1.0f, 0.625584f, -1.0f),
        Vec3f(1.0f, 0.625584f, -1.0f),
        Vec3f(-0.688362f, 0.625584f, -1.688679f),
        Vec3f(0.688362f, 0.625584f, -1.688679f),
        Vec3f(-0.717988f, 0.855604f, 0.760938f),
        Vec3f(0.717988f, 0.855604f, 0.760938f),
        Vec3f(-0.717988f, 0.855604f, -0.586813f),
        Vec3f(0.717988f, 0.855604f, -0.586813f),
        Vec3f(-0.494236f, 0.855604f, -1.0f),
        Vec3f(0.494236f, 0.855604f, -1.0f),
        Vec3f(-0.413017f, 0.0f, -1.688679f),
        Vec3f(-0.137672f, 0.0f, -1.688679f),
        Vec3f(0.137672f, 0.0f, -1.688679f),
        Vec3f(0.413017f, 0.0f, -1.68868f),
        Vec3f(-0.413017f, 0.625584f, -1.688679f),
        Vec3f(-0.137672f, 0.625584f, -1.688679f),
        Vec3f(0.137672f, 0.625584f, -1.688679f),
        Vec3f(0.413017f, 0.625584f, -1.688679f),
        Vec3f(0.413017f, 0.855604f, -1.0f),
        Vec3f(0.137672f, 0.855604f, -1.0f),
        Vec3f(-0.137672f, 0.855604f, -1.0f),
        Vec3f(-0.413017f, 0.855604f, -1.0f),
        Vec3f(-0.413017f, 0.0f, -1.0f),
        Vec3f(-0.137672f, 0.0f, -1.0f),
        Vec3f(0.137672f, 0.0f, -1.0f),
        Vec3f(0.413017f, 0.0f, -1.0f),
        Vec3f(0.413017f, 0.625584f, -1.0f),
        Vec3f(-0.413017f, 0.625584f, -1.0f),
        Vec3f(0.137672f, 0.625584f, -1.0f),
        Vec3f(-0.137672f, 0.625584f, -1.0f),
    };

    int index_buffer[faceNum * 3] = {
        0, 3, 1,
        2, 0, 6,
        1, 3, 7,
        0, 1, 6,
        2, 10, 4,
        9, 5, 11,
        6, 1, 7,
        8, 10, 2,
        7, 3, 9,
        6, 8, 2,
        3, 5, 9,
        12, 14, 8,
        6, 12, 8,
        13, 12, 6,
        7, 13, 6,
        9, 13, 7,
        13, 9, 15,
        14, 12, 13,
        13, 15, 14,
        17, 26, 14,
        17, 14, 15,
        16, 8, 14,
        8, 16, 10,
        11, 17, 9,
        17, 15, 9,
        5, 3, 21,
        4, 18, 2,
        3, 0, 33,
        24, 28, 27,
        24, 23, 28,
        22, 16, 29,
        16, 22, 10,
        26, 17, 25,
        17, 11, 25,
        25, 11, 21,
        5, 21, 11,
        18, 10, 22,
        10, 18, 4,
        24, 20, 19,
        24, 19, 23,
        18, 30, 2,
        3, 33, 21,
        31, 19, 20,
        31, 20, 32,
        25, 34, 26,
        24, 27, 36,
        28, 23, 37,
        22, 29, 35,
        29, 28, 35,
        37, 35, 28,
        27, 26, 36,
        34, 36, 26,
        33, 36, 34,
        36, 33, 32,
        31, 35, 37,
        35, 31, 30,
        37, 23, 31,
        23, 19, 31,
        36, 32, 24,
        32, 20, 24,
        34, 25, 33,
        25, 21, 33,
        35, 30, 22,
        30, 18, 22,
        33, 0, 32,
        32, 0, 31,
        31, 0, 30,
        0, 2, 30,
        16, 14, 29,
        29, 14, 28,
        28, 14, 27,
        26, 27, 14,
    };

    for (int i = 0; i < faceNum; i++)
    {
        Vec3f a = vertex_buffer[index_buffer[i * 3 + 0]];
        Vec3f b = vertex_buffer[index_buffer[i * 3 + 1]];
        Vec3f c = vertex_buffer[index_buffer[i * 3 + 2]];
        drawTriangle(a[0], a[1], a[2], b[0], b[1], b[2], c[0], c[1], c[2]);
    }
}